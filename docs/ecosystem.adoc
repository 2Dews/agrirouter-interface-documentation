:imagesdir: ./../assets/images/

= agrirouter EcoSystem

NOTE: This chapter is not yet fully implemented


The agrirouter is a central data exchange platform, but to understand its full power, it’s important to understand, that the data provided from the agrirouter comes from the applications attached to the agrirouter. The following figure lists different Applications, that can be attached to one end user account.

image:ig1\image10.png[image,width=642,height=321]

Figure 10 The agrirouter ecosystem of members


== Hierarchical Overview of endpoints

image:ig1\image11.png[image,width=634,height=400]

Figure 11 A hierarchical overview of agrirouter ECO System

There is 1 agrirouter solution, with multiple accounts, one for each end user. An end user equals a Farm, a Contractor, etc.

Every Account can onboard multiple Application Instances.

Applications can be onboarded to multiple accounts (dotted gray lines).

Applications can be CUs, Farming Software or Telemetry Platforms.

Applications of type “Telemetry platform” can onboard multiple virtual CUs.

Machines are connected to CUs or Virtual CUs. Machines can be attached to different CUs or Virtual CUs.

A teamset is one (virtual) CU with zero to n attached machines.

If there are 2 CUs installed on a real-world machine, a machine can be found in multiple teamsets and therefore even in multiple accounts.

Applications, Virtual CUs and Machines are endpoints, that can be source or target of a message.

== Machines

You might wonder, why machines are not listed as applications. The answer is easy: Machines cannot be directly connected to the agrirouter. Machines are always connected through an application like a CU or a virtual CU.

(Virtual) CUs, that are connected to the ISOBUS can provide the device description of connected machines and send live telemetry data. If a CU provides the device description of connected machines, these machines can be addressed by agrirouter messages. A farmer could for example send an initial taskset to his seeder and the taskset is delivered to whichever CU reports to agrirouter, that it is connected to this seeder.

== Communication addresses: Endpoints

An endpoint is an addressable communication address for an application instance connected to the agrirouter. One application instance can be part of multiple agrirouter accounts or there can be multiple instances of the same application in one agrirouter account. An example for multiple instances of the same application in one account are multiple CUs onboarded to one account.

The address of an endpoint is used by its corresponding app instance to communicate with the agrirouter and by other app instances within the same account to address this app instance.

== Connected end user accounts

It is possible to connect 2 agrirouter accounts with each other using the email address of the end users and setting up a connection using the graphical user interface of agrirouter. Each connected agrirouter account gets its own endpoint in the partners agrirouter account and vice versa.

image:ig1\image12.PNG[image,width=642,height=354]

Figure 12 List of paired accounts

[IMPORTANT]
====
 It is not possible to address an endpoint inside another agrirouter account, neither is it possible to list the endpoints of this account.
====

== Teamset

A teamset is a set of connected machines which work and move together and are connected to the same communication unit. The machines in the teamset are typically connected physically and informationally (for example via ISOBUS).

A (virtual) CU is responsible for the agrirouter communication of one teamset. It sends descriptions of the machines in the teamset whenever the teamset changes or when the descriptions of at least one of the machines changes (for example because of a reconfiguration or the CU connects to another machine). This way the agrirouter knows about the machines themselves, and about which machine is connected to which communication unit.

Each CU only sends one teamset, every teamset can only be part of one CU. If multiple CUs are on the same network (e.g. a terminal in the tractor + a telemetry box on the baler), there will be multiple teamsets in agrirouter including the same machines and sending the same data. Apps are then responsible for filtering duplicated data. If there are no machines connected, the teamset of a CU will just be empty.

